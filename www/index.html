<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="format-detection" content="telephone=no" />
        <meta name="msapplication-tap-highlight" content="no" />
        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />

        <link rel="stylesheet" type="text/css" href="css/style.css" />
        <link rel="stylesheet" type="text/css" href="css/normalize.css" />

        <title>Hello World</title>

        <!--Libs-->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
        <script src="http://jsconsole.com/remote.js?dex-iteration-2"></script>
    </head>
    <body>

        <iframe class="player" id="playerFrame" src="http://sc-playback-daily.herokuapp.com/player/?andrew=1"style="display:none;"></iframe>
        <div id='main'>

        </div>

        <script type="text/javascript" src="cordova.js"></script>
        <script type="text/javascript" src="js/sdk.js"></script>
        <script type="text/javascript" src="js/index.js"></script>

        <script type="text/javascript">
            var username = encodeURIComponent('hfiller2@uwo.ca');
		    var password = encodeURIComponent('Lieske25113');
		    $.ajax({
                type:"POST",
                url:"http://ice4e-developer.dexit.co/login?IDToken1="+username+"&IDToken2="+password+"&Login.Submit=Sign+In",
                headers:{
                    'Content-Type': 'application/x-www-form-urlencoded'
                }
            });
            $.ajax({
			    type:"POST",
			    url:"https://sso.dexit.co/openam/oauth2/access_token?realm=altostratus&grant_type=password&username="+username+"&password="+password,
			    headers: {
				    'Authorization':'Basic ZHgtc2VydmljZToxMjMtNDU2LTc4OQ==',
				    'Content-Type' : 'application/x-www-form-urlencoded'
			    }
		    }).done(function(tokenObject){
			    console.log('Token\n' + JSON.stringify(tokenObject));

			    $.ajax({
				    type:"POST",
				    url:"http://developer.kb.dexit.co/access/stores/course_admin/query?query=SELECT%20*%20FROM%20Altostratus.developer_course_student%20WHERE%20student_email%20%3D%20%27sdownie%40uwo.ca%27%3B",
				    headers:{
					    'Authorization':'Bearer ' + tokenObject.access_token
				    }
			    }).done(function(msg){
				    $('#main').html('Courses\n' + JSON.stringify(msg));
			    });
		    });
        </script>
    </body>
</html>
